#实验报告——SQL语言使用
----

##一、实验目的

##二、实验平台

###1.数据库管理系统    
**MySQL 5.7.20**

###2.可视化管理工具

###3.操作系统
**Windows 10（企业版）**

##三、实验准备
**创建用户:**     

![](images\start.png)    

**中文编码问题：**   

![](images\utf8.png)    

##四、实验内容

###4.数据库安全性

###4.2数据库安全性控制

###授权：授予与收回    

首先建立u1-u7的用户      

![](images\4.1.1.png)   

![](images\4.1.2.png)    

错误原因：3115005124没有GRANT权限，解决方法：使用root用户赋予3115005124@localhost用户GRANT权限。    

![](images\4.1.3.png)   

使用root用户赋予3115005124@localhost用户GRANT权限。    

![](images\4.1.4.png)   

查询用户列表。    
     
-----

【4.1】把查询Student表的权限授给用户U1。    

![](images\4.1.5.png)    

错误原因：不能在用户表中找到u1这个用户。在Mysql中用户名必须为创建时的全名，解决方法如下：    

![](images\4.1.6.png)   

【4.2】把对Student表和Course表的全部操作权限授予用户U2和U3。    

![](images\4.2.1.png)    

错误原因：Mysql不支持同时将两张表的权限授予用户，解决方法如下：    

![](images\4.2.2.png)    

【4.3】把对表SC的查询权限授予所有用户。    

![](images\4.3.1.png)    

错误原因：public 不是用户表里面的用户，也就是说Mysql没有用户组的概念，不能用public来代替所有的用户，解决方法暂为一个个授权。   

【4.4】把查询Student表和修改学生学号的权限授给用户U4。     

![](images\4.4.1.png)    


【4.5】把对表SC的INSERT权限授予U5用户，并允许将此权限再授予其他用户。    

![](images\4.5.1.png)    

【4.6】

	GRANT INSERT
	ON TABLE SC 
	TO U6
	WITH GRANT OPTION;   

![](images\4.6.1.png)    
 
【4.7】

	GRANT INSERT 
	ON TABLE SC 
	TO U7;    

![](images\4.7.1.png)   

----

【4.8】把用户U4修改学生学号的权限收回。    

![](images\4.8.1.png)   

【4.9】收回所有用户对表SC的查询权限。    

![](images\4.9.1.png)   

【4.10】把用户U5对SC表的INSERT权限收回。    

![](images\4.10.1.png)   

错误原因：mysql不支持cascade，所以这里报错。    

----
###数据库角色

【4.11】通过角色来实现将一组权限授予一个用户。    

![](images\4.11.1.png)   

错误原因：Mysql不支持角色的创建，所以这里与角色有关的操作都无法进行

【4.12】角色的权限修改。    

【4.13】

	REVOKE SELECT
	ON TABLE Student
	FROM R1；


###4.3视图机制

【4.14】建立计算机系学生的视图，把对该视图的SELECT权限授予王平，把该视图上单所有操作权限授予张明。     

![](images\4.14.1.png)   

###4.4审计

【4.15】对修改SC表结构或修改SC表数据的操作进行审计。    

![](images\4.15.1.png)   

错误原因：mysql服务器自身没有提供审计功能。

【4.16】取消对SC表的一切审计。    


